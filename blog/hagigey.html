<!doctype html>
<html lang="he" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>הגיגי אמרי — שלושת הפוסטים האחרונים</title>
    <meta name="description" content="תצוגה דינמית של שלושת הפוסטים האחרונים מהבלוג הגיגי אמרי." />
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0%25' stop-color='%23f6e5d1'/%3E%3Cstop offset='100%25' stop-color='%23d4a76a'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='32' height='32' rx='8' fill='url(%23g)'/%3E%3Cpath d='M7 9.5A1.5 1.5 0 0 1 8.5 8H14a2.5 2.5 0 0 1 2 1 2.5 2.5 0 0 1 2-1h5.5A1.5 1.5 0 0 1 25 9.5V22a1 1 0 0 1-1.1 1l-4.8-.7a3.5 3.5 0 0 0-2.5.8l-.6.5-.6-.5a3.5 3.5 0 0 0-2.5-.8l-4.8.7A1 1 0 0 1 7 22V9.5z' fill='none' stroke='%236b3e16' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M16 9v14' stroke='%236b3e16' stroke-width='1.5'/%3E%3C/svg%3E" />

    <!-- Professional Hebrew typeface -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap" rel="stylesheet" />

    <style>
        /* ── Design Tokens ──────────────────────────────── */
        :root {
            color-scheme: light;

            --ink-900: #1a1b1e;
            --ink-700: #33363f;
            --ink-500: #6b7084;
            --ink-400: #8e92a4;

            --paper-50: #ffffff;
            --paper-100: #faf8f5;
            --paper-200: #f3efe9;
            --paper-300: #e8e1d8;
            --paper-400: #d9cfc2;

            --accent-600: #7a4d1e;
            --accent-500: #9b6530;
            --accent-400: #b87d3e;
            --accent-100: #fdf3e7;

            --radius-sm: 12px;
            --radius-md: 20px;
            --radius-lg: 28px;
            --radius-pill: 999px;

            --shadow-sm: 0 1px 3px rgba(26, 27, 30, 0.04), 0 4px 12px rgba(26, 27, 30, 0.06);
            --shadow-md: 0 4px 12px rgba(26, 27, 30, 0.04), 0 20px 48px rgba(26, 27, 30, 0.08);
            --shadow-lg: 0 8px 20px rgba(26, 27, 30, 0.05), 0 32px 64px rgba(26, 27, 30, 0.1);

            --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
            --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* ── Reset & Base ───────────────────────────────── */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: "Rubik", "Segoe UI", system-ui, -apple-system, sans-serif;
            background:
                radial-gradient(ellipse 1100px 600px at 80% -8%, rgba(253, 243, 231, 0.8) 0%, transparent 70%),
                radial-gradient(ellipse 800px 400px at 10% 100%, rgba(253, 243, 231, 0.5) 0%, transparent 70%),
                var(--paper-100);
            color: var(--ink-900);
            line-height: 1.78;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        ::selection {
            background: var(--accent-100);
            color: var(--accent-600);
        }

        /* ── Page Layout ────────────────────────────────── */
        .page {
            max-width: 820px;
            margin: 0 auto;
            min-height: 100vh;
            display: grid;
            grid-template-rows: auto 1fr auto;
            gap: 0;
            padding: 0 clamp(20px, 5vw, 48px);
        }

        /* ── Hero ───────────────────────────────────────── */
        .hero {
            padding: clamp(48px, 8vw, 80px) 0 clamp(32px, 5vw, 48px);
            display: grid;
            gap: 14px;
        }

        .hero-row {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .hero-icon {
            flex-shrink: 0;
            width: 48px;
            height: 48px;
            border-radius: 14px;
            display: grid;
            place-items: center;
            color: var(--accent-600);
            background: linear-gradient(135deg, #fff8ee 0%, #f0dfc5 100%);
            box-shadow:
                0 1px 2px rgba(139, 91, 43, 0.08),
                0 8px 20px rgba(139, 91, 43, 0.12);
        }

        .hero-icon svg {
            width: 24px;
            height: 24px;
        }

        .hero h1 {
            margin: 0;
            font-size: clamp(28px, 4.5vw, 44px);
            font-weight: 700;
            letter-spacing: -0.025em;
            line-height: 1.15;
        }

        .hero-subtitle {
            margin: 0;
            color: var(--ink-500);
            font-size: clamp(0.95rem, 1.5vw, 1.05rem);
            max-width: 52ch;
            line-height: 1.7;
        }

        .hero-divider {
            width: 48px;
            height: 3px;
            border-radius: 2px;
            background: var(--paper-300);
            margin-top: 4px;
        }

        /* ── Posts Grid ─────────────────────────────────── */
        .posts {
            display: grid;
            gap: 24px;
            padding-bottom: clamp(40px, 6vw, 64px);
        }

        /* ── Card ───────────────────────────────────────── */
        .card {
            background: var(--paper-50);
            border: 1px solid var(--paper-300);
            border-radius: var(--radius-lg);
            padding: clamp(28px, 4vw, 44px);
            box-shadow: var(--shadow-sm);
            display: grid;
            gap: 20px;
            transition:
                box-shadow 0.4s var(--ease-out),
                border-color 0.4s var(--ease-out),
                transform 0.4s var(--ease-out);
            /* entrance animation */
            opacity: 0;
            transform: translateY(20px);
            animation: card-enter 0.6s var(--ease-out) forwards;
        }

        .card:nth-child(1) { animation-delay: 0s; }
        .card:nth-child(2) { animation-delay: 0.08s; }
        .card:nth-child(3) { animation-delay: 0.16s; }

        @keyframes card-enter {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card:hover {
            box-shadow: var(--shadow-md);
            border-color: var(--paper-400);
            transform: translateY(-2px);
        }

        /* ── Post Meta (date) ───────────────────────────── */
        .post-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--ink-400);
            font-size: 0.88rem;
            font-weight: 500;
            letter-spacing: 0.02em;
        }

        .post-meta-icon {
            width: 16px;
            height: 16px;
            opacity: 0.6;
        }

        /* ── Post Title ─────────────────────────────────── */
        .post-title {
            margin: 0;
            font-size: clamp(22px, 3.5vw, 32px);
            font-weight: 700;
            line-height: 1.25;
            letter-spacing: -0.015em;
        }

        /* ── Post Content ───────────────────────────────── */
        .post-content {
            display: grid;
            gap: 16px;
            font-size: 1rem;
            color: var(--ink-700);
            line-height: 1.85;
        }

        .post-content p {
            margin: 0;
        }

        .post-content img {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-md);
            border: 1px solid var(--paper-300);
            box-shadow: var(--shadow-sm);
        }

        .post-content a {
            color: var(--accent-500);
            font-weight: 600;
            text-decoration: underline;
            text-decoration-color: rgba(155, 101, 48, 0.3);
            text-decoration-thickness: 2px;
            text-underline-offset: 3px;
            transition: text-decoration-color 0.2s ease;
        }

        .post-content a:hover {
            text-decoration-color: var(--accent-500);
        }

        .post-content blockquote {
            margin: 8px 0;
            padding: 16px 24px;
            border-inline-start: 3px solid var(--accent-400);
            background: var(--accent-100);
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            font-style: italic;
            color: var(--ink-700);
        }

        .post-content h2,
        .post-content h3,
        .post-content h4 {
            margin: 8px 0 0;
            font-weight: 600;
            line-height: 1.3;
            color: var(--ink-900);
        }

        .post-content ul,
        .post-content ol {
            padding-inline-start: 24px;
            margin: 0;
        }

        .post-content li {
            margin-bottom: 4px;
        }

        .post-content pre,
        .post-content code {
            font-family: "SF Mono", "Fira Code", "Consolas", monospace;
            font-size: 0.9em;
            background: var(--paper-200);
            border-radius: 6px;
            padding: 2px 6px;
        }

        .post-content pre {
            padding: 16px 20px;
            overflow-x: auto;
            border: 1px solid var(--paper-300);
        }

        .post-content pre code {
            background: none;
            padding: 0;
        }

        /* ── Post Footer / Link Button ──────────────────── */
        .post-footer {
            display: flex;
            justify-content: flex-start;
            padding-top: 4px;
        }

        .post-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: var(--radius-pill);
            background: var(--ink-900);
            color: #fff;
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 0.01em;
            transition:
                background 0.25s ease,
                transform 0.3s var(--ease-spring),
                box-shadow 0.3s ease;
            box-shadow: 0 2px 8px rgba(26, 27, 30, 0.15);
        }

        .post-link:hover {
            background: var(--ink-700);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(26, 27, 30, 0.2);
        }

        .post-link:active {
            transform: translateY(0);
        }

        .post-link-arrow {
            width: 16px;
            height: 16px;
            transition: transform 0.3s var(--ease-spring);
        }

        .post-link:hover .post-link-arrow {
            transform: translateX(-3px);
        }

        /* ── Site Footer ────────────────────────────────── */
        .site-footer {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 28px 0 36px;
            border-top: 1px solid var(--paper-300);
            color: var(--ink-400);
            font-size: 0.85rem;
        }

        .site-footer-dot {
            width: 3px;
            height: 3px;
            border-radius: 50%;
            background: var(--paper-400);
        }

        .site-footer a {
            color: var(--ink-500);
            font-weight: 500;
            transition: color 0.2s ease;
        }

        .site-footer a:hover {
            color: var(--accent-500);
        }

        /* ── Loading Skeletons ──────────────────────────── */
        .loading .post-body {
            display: none;
        }

        .skeleton-block {
            display: grid;
            gap: 14px;
        }

        .skeleton {
            position: relative;
            overflow: hidden;
            background: var(--paper-200);
            border-radius: var(--radius-pill);
            height: 14px;
        }

        .skeleton::after {
            content: "";
            position: absolute;
            inset: 0;
            transform: translateX(-100%);
            background: linear-gradient(90deg,
                    transparent 0%,
                    rgba(255, 255, 255, 0.5) 50%,
                    transparent 100%);
            animation: shimmer 1.8s ease-in-out infinite;
        }

        .skeleton-meta {
            width: 120px;
            height: 12px;
        }

        .skeleton-title {
            height: 28px;
            width: 60%;
            border-radius: var(--radius-sm);
        }

        .skeleton-line {
            border-radius: 8px;
        }

        .skeleton-line.short {
            width: 75%;
        }

        .skeleton-line.shorter {
            width: 55%;
        }

        @keyframes shimmer {
            100% {
                transform: translateX(100%);
            }
        }

        /* ── Error / Empty State ────────────────────────── */
        .empty-state {
            text-align: center;
            padding: 64px 24px;
            color: var(--ink-400);
        }

        .empty-state-icon {
            width: 56px;
            height: 56px;
            margin: 0 auto 16px;
            color: var(--paper-400);
        }

        .empty-state h2 {
            margin: 0 0 8px;
            font-size: 1.15rem;
            font-weight: 600;
            color: var(--ink-700);
        }

        .empty-state p {
            margin: 0;
            font-size: 0.95rem;
        }

        /* ── Responsive ─────────────────────────────────── */
        @media (max-width: 640px) {
            .hero {
                padding: 36px 0 28px;
            }

            .hero-icon {
                width: 40px;
                height: 40px;
                border-radius: 12px;
            }

            .hero-icon svg {
                width: 20px;
                height: 20px;
            }

            .card {
                border-radius: var(--radius-md);
                padding: 24px;
            }

            .post-footer {
                justify-content: stretch;
            }

            .post-link {
                width: 100%;
                justify-content: center;
                padding: 12px 20px;
            }

            .site-footer {
                flex-wrap: wrap;
                text-align: center;
                padding: 24px 0 32px;
            }
        }

        /* ── Print ──────────────────────────────────────── */
        @media print {
            body {
                background: #fff;
            }

            .card {
                box-shadow: none;
                border: 1px solid #ddd;
                break-inside: avoid;
            }

            .post-link {
                color: var(--ink-900);
                background: none;
                border: 1px solid var(--ink-900);
            }
        }
    </style>
</head>

<body>
    <div class="page">
        <header class="hero" id="hero" hidden>
            <div class="hero-row">
                <span class="hero-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M4.5 6.5c0-1.1.9-2 2-2h5.6c1 0 1.9.6 2.4 1.4.5-.8 1.4-1.4 2.4-1.4h5.6c1.1 0 2 .9 2 2V19c0 .8-.7 1.4-1.5 1.3l-5.8-.9c-1.2-.2-2.4.2-3.1 1.1l-.4.4-.4-.4c-.7-.9-1.9-1.3-3.1-1.1l-5.8.9c-.8.1-1.5-.5-1.5-1.3V6.5z" />
                        <path d="M12 6v14" />
                    </svg>
                </span>
                <h1 id="blog-title"></h1>
            </div>
            <p class="hero-subtitle" id="blog-subtitle"></p>
            <div class="hero-divider" aria-hidden="true"></div>
        </header>

        <main class="posts loading" id="posts" aria-busy="true">
            <article class="card" style="animation: none; opacity: 1; transform: none;">
                <div class="skeleton-block">
                    <div class="skeleton skeleton-meta"></div>
                    <div class="skeleton skeleton-title"></div>
                    <div class="skeleton skeleton-line"></div>
                    <div class="skeleton skeleton-line short"></div>
                    <div class="skeleton skeleton-line shorter"></div>
                </div>
            </article>
            <article class="card" style="animation: none; opacity: 1; transform: none;">
                <div class="skeleton-block">
                    <div class="skeleton skeleton-meta"></div>
                    <div class="skeleton skeleton-title"></div>
                    <div class="skeleton skeleton-line"></div>
                    <div class="skeleton skeleton-line short"></div>
                </div>
            </article>
            <article class="card" style="animation: none; opacity: 1; transform: none;">
                <div class="skeleton-block">
                    <div class="skeleton skeleton-meta"></div>
                    <div class="skeleton skeleton-title"></div>
                    <div class="skeleton skeleton-line"></div>
                    <div class="skeleton skeleton-line short"></div>
                </div>
            </article>
        </main>

        <footer class="site-footer">
            <span>עמוד מדיניות פרטיות</span>
            <span class="site-footer-dot" aria-hidden="true"></span>
            <a href="./privacy-policy.html">Privacy Policy</a>
        </footer>
    </div>

    <script>
        const posts = document.getElementById("posts");
        const hero = document.getElementById("hero");
        const blogTitle = document.getElementById("blog-title");
        const blogSubtitle = document.getElementById("blog-subtitle");

        function getLinkHost(linkUrl) {
            try {
                return new URL(linkUrl).host;
            } catch {
                return linkUrl;
            }
        }

        /* SVG icon helpers */
        const calendarIcon = `<svg class="post-meta-icon" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="12" height="11" rx="2"/><path d="M5 1.5v2M11 1.5v2M2 7h12"/></svg>`;

        const arrowIcon = `<svg class="post-link-arrow" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M10 4l-4 4 4 4"/></svg>`;

        function buildPostCard(entry) {
            const title = entry.title?.$t ?? "";
            const content = entry.content?.$t ?? entry.summary?.$t ?? "";
            const published = entry.published?.$t ?? entry.updated?.$t ?? "";
            const date = published ? new Date(published) : null;
            const formattedDate = date
                ? new Intl.DateTimeFormat("he-IL", { dateStyle: "long" }).format(date)
                : "";
            const alternateLink = (entry.link || []).find(
                (link) => link.rel === "alternate"
            );
            const linkUrl = alternateLink?.href ?? "https://hagigey.blogspot.com/";

            const card = document.createElement("article");
            card.className = "card";

            const meta = document.createElement("div");
            meta.className = "post-meta";
            meta.innerHTML = `${calendarIcon}<span>${formattedDate}</span>`;

            const heading = document.createElement("h2");
            heading.className = "post-title";
            heading.textContent = title;

            const body = document.createElement("div");
            body.className = "post-content";
            body.innerHTML = content;

            const footer = document.createElement("div");
            footer.className = "post-footer";

            const linkEl = document.createElement("a");
            linkEl.className = "post-link";
            linkEl.href = linkUrl;
            linkEl.target = "_blank";
            linkEl.rel = "noreferrer";
            linkEl.innerHTML = `<span>קראו עוד</span>${arrowIcon}`;

            footer.appendChild(linkEl);
            card.append(meta, heading, body, footer);

            return card;
        }

        function showEmptyState() {
            posts.innerHTML = `
                <div class="empty-state">
                    <svg class="empty-state-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4.5 6.5c0-1.1.9-2 2-2h5.6c1 0 1.9.6 2.4 1.4.5-.8 1.4-1.4 2.4-1.4h5.6c1.1 0 2 .9 2 2V19c0 .8-.7 1.4-1.5 1.3l-5.8-.9c-1.2-.2-2.4.2-3.1 1.1l-.4.4-.4-.4c-.7-.9-1.9-1.3-3.1-1.1l-5.8.9c-.8.1-1.5-.5-1.5-1.3V6.5z"/>
                        <path d="M12 6v14"/>
                    </svg>
                    <h2>אין פוסטים להצגה</h2>
                    <p>לא הצלחנו לטעון את הפוסטים כרגע. נסו שוב מאוחר יותר.</p>
                </div>`;
            posts.classList.remove("loading");
            posts.setAttribute("aria-busy", "false");
        }

        function renderHagigey(data) {
            const feed = data?.feed;
            const entries = feed?.entry ?? [];

            if (!feed || entries.length === 0) {
                showEmptyState();
                return;
            }

            blogTitle.textContent = feed.title?.$t ?? "";
            blogSubtitle.textContent = feed.subtitle?.$t ?? "";
            blogSubtitle.hidden = !blogSubtitle.textContent;
            hero.hidden = !blogTitle.textContent;

            posts.innerHTML = "";
            entries.slice(0, 3).forEach((entry) => {
                posts.appendChild(buildPostCard(entry));
            });

            document.title = blogTitle.textContent
                ? `${blogTitle.textContent} — שלושת הפוסטים האחרונים`
                : document.title;

            posts.classList.remove("loading");
            posts.setAttribute("aria-busy", "false");
        }

        /* Timeout fallback — show empty state if feed fails to load */
        setTimeout(() => {
            if (posts.classList.contains("loading")) {
                showEmptyState();
            }
        }, 12000);
    </script>
    <script
        src="https://hagigey.blogspot.com/feeds/posts/default?alt=json-in-script&max-results=3&callback=renderHagigey">
    </script>
</body>

</html>
